<!DOCTYPE html>
<!-- saved from url=(0032)http://127.0.0.1:5500/index.html -->
<html lang="vi"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Gi√°m S√°t</title>
    
    <link rel="stylesheet" href="./Dashboard Gi√°m S√°t_files/main.css">
    
    <link href="./Dashboard Gi√°m S√°t_files/boxicons.min.css" rel="stylesheet">
    
    <script src="./Dashboard Gi√°m S√°t_files/chart.js.download"></script>

    <style>
        .stat-card {
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-5px);
        }
        .stat-card.chart-active {
            box-shadow: 0 0 15px 3px rgba(255, 255, 255, 0.25);
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    
    <nav class="sidebar">
        <h2>ƒê·ªí √ÅN</h2>
        <ul>
            <li id="nav-giam-sat" class="active"><i class="bx bxs-dashboard"></i> Gi√°m S√°t</li>
            <li id="nav-bao-cao" class=""><i class="bx bxs-report"></i> B√°o C√°o</li>
            <li class=""><i class="bx bxs-bell"></i> C·∫£nh B√°o</li>
            <li><i class="bx bx-map"></i> D·ª± ƒëo√°n</li>
        </ul>
    </nav>

    <div class="main-content">

        <div id="giam-sat-content" class="page-content">
            <h1>Gi√°m S√°t</h1>
            <div class="dashboard-grid">
                <div class="card chart-card">
                    <canvas id="temperatureChart" width="1522" height="250" style="display: block; box-sizing: border-box; height: 250px; width: 1522px;"></canvas>
                </div>
                
                <div class="card stat-card green">
                    <i class="bx bxs-thermometer icon"></i>
                    <div class="value">27¬∞C</div>
                    <div class="label">Nhi·ªát ƒë·ªô</div>
                </div>
                <div class="card stat-card blue">
                    <i class="bx bxs-droplet-half icon"></i>
                    <div class="value">71.5%</div>
                    <div class="label">ƒê·ªô ·∫©m</div>
                </div>
                <div class="card stat-card red chart-active">
                    <i class="bx bxs-flask icon"></i>
                    <div class="value">90%</div>
                    <div class="label">N·ªìng ƒë·ªô C02</div>
                </div>
                <div class="card stat-card purple">
                    <i class="bx bxs-cloud icon"></i>
                    <div class="value">45 g/m¬≥</div>
                    <div class="label">N·ªìng ƒë·ªô b·ª•i m·ªãn</div>
                </div>
                <div class="card stat-card yellow">
                    <i class="bx bx-wind icon"></i>
                    <div class="value">3.2 m/s</div>
                    <div class="label">T·ªëc ƒë·ªô gi√≥</div>
                </div>

            </div>
            <div class="card data-table-card">
                <div class="card-header">
                    <div>
                        <h3>B·∫£ng th·ªëng k√™ d·ªØ li·ªáu</h3>
                        <p>Hi·ªÉn th·ªã 20 d·ªØ li·ªáu g·∫ßn ƒë√¢y nh·∫•t</p>
                    </div>
                    <i class="bx bx-cog"></i>
                </div>
                <div class="card-body">
                    <table>
                        <thead>
                            <tr>
                                <th>Th·ªùi gian</th>
                                <th>Nhi·ªát ƒë·ªô (¬∞C)</th>
                                <th>ƒê·ªô ·∫©m (%)</th>
                                <th>N·ªìng ƒë·ªô CO‚ÇÇ (%)</th>
                                <th>B·ª•i m·ªãn (g/m¬≥)</th>
                                <th>T·ªëc ƒë·ªô gi√≥ (m/s)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2021-01-18 11:26:43</td>
                                <td>27</td>
                                <td>71.5</td>
                                <td>97.5</td>
                                <td>45</td>
                                <td>3.2</td>
                            </tr>
                            <tr>
                                <td>2021-01-18 11:26:38</td>
                                <td>26.5</td>
                                <td>74.0</td>
                                <td>95.0</td>
                                <td>47</td>
                                <td>2.8</td>
                            </tr>
                            <tr>
                                <td>2021-01-18 11:26:33</td>
                                <td>27.2</td>
                                <td>70.5</td>
                                <td>92.0</td>
                                <td>50</td>
                                <td>3.5</td>
                            </tr>
                            <tr>
                                <td>2021-01-18 11:26:28</td>
                                <td>26.8</td>
                                <td>73.2</td>
                                <td>93.5</td>
                                <td>48</td>
                                <td>3.0</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="bao-cao-content" class="page-content page-hidden">
             <div class="report-header">
&nbsp; &nbsp; &nbsp; &nbsp; <div class="title">¬ª B√°o c√°o</div>
&nbsp; &nbsp; &nbsp; &nbsp; <div class="actions">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <div class="search-box">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class="bx bx-search"></i>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <input type="text" placeholder="T√¨m ki·∫øm...">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class="bx bx-cog" style="font-size: 24px; cursor: pointer;"></i>
&nbsp; &nbsp; &nbsp; &nbsp; </div>
&nbsp; &nbsp; </div>

&nbsp; &nbsp; <div class="main-actions">
&nbsp; &nbsp; &nbsp; &nbsp; <div class="export-buttons">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <button class="btn-excel">EXCEL</button>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <button class="btn-csv">CSV</button>
&nbsp; &nbsp; &nbsp; &nbsp; </div>
&nbsp; &nbsp; </div>

&nbsp; &nbsp; <div class="card data-table-card">
&nbsp; &nbsp; &nbsp; &nbsp; <div class="card-header">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <div>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <h3>B·∫£ng th·ªëng k√™ d·ªØ li·ªáu</h3>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <p>Hi·ªÉn th·ªã 40 d·ªØ li·ªáu g·∫ßn ƒë√¢y nh·∫•t</p>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class="bx bx-cog"></i>
&nbsp; &nbsp; &nbsp; &nbsp; </div>

&nbsp; &nbsp; &nbsp; &nbsp; <div class="card-body">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <table><thead><tr><th>Th·ªùi gian</th><th>Nhi·ªát ƒë·ªô (¬∞C)</th><th>ƒê·ªô ·∫©m (%)</th><th>N·ªìng ƒë·ªô CO‚ÇÇ (%)</th><th>B·ª•i m·ªãn (g/m¬≥)</th><th>T·ªëc ƒë·ªô gi√≥ (m/s)</th></tr></thead><tbody><tr><td>2021-01-18 11:26:43</td><td>27</td><td>71.5</td><td>97.5</td><td>45</td><td>3.2</td></tr></tbody></table>
&nbsp; &nbsp; &nbsp; &nbsp; </div>
&nbsp; &nbsp; </div>
        </div>

        <div id="canh-bao-content" class="page-content page-hidden">
            <h1>C·∫£nh B√°o</h1>
            <div class="status-summary">
&nbsp; &nbsp; &nbsp; &nbsp; <div class="status-card normal">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class="bx bxs-thermometer"></i>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <div>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <h4>Nhi·ªát ƒë·ªô</h4>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <p>27¬∞C</p>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span>üü¢ B√¨nh th∆∞·ªùng</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _</div>
&nbsp; &nbsp; &nbsp; &nbsp; </div>

&nbsp; &nbsp; &nbsp; &nbsp; <div class="status-card normal">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class="bx bxs-droplet-half"></i>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <div>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <h4>ƒê·ªô ·∫©m</h4>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <p>71.5%</p>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span>üü¢ B√¨nh th∆∞·ªùng</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div>
&nbsp; &nbsp; &nbsp; &nbsp; </div>

&nbsp; &nbsp; &nbsp; &nbsp; <div class="status-card danger">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <i class="bx bxs-flask"></i>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <div>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <h4>N·ªìng ƒë·ªô CO‚ÇÇ</h4>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <p>110%</p>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span>üî¥ C·∫£nh b√°o m·∫°nh</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div>
&nbsp; &nbsp; &nbsp; &nbsp; </div>

 <div class="status-card warning">
<i class="bx bxs-cloud"></i>
<div>
 <h4>B·ª•i m·ªãn</h4>
 <p>120 g/m¬≥</p>
 <span>üü† C·∫£nh b√°o nh·∫π</span>
 </div>
 </div>

 <div class="status-card danger">
<i class="bx bx-wind"></i>
<div>
<h4>T·ªëc ƒë·ªô gi√≥</h4>
<p>12 m/s</p>
<span>üî¥ C·∫£nh b√°o m·∫°nh</span>
</div>
</div>
</div>
        </div>
    </div>

    <script>
        // --- PH·∫¶N 1: C√ÄI ƒê·∫∂T BI·ªÇU ƒê·ªí V√Ä C·∫¨P NH·∫¨T ---

        let mainChart;
        let ctx;

        // D·ªØ li·ªáu m·∫´u cho c√°c bi·ªÉu ƒë·ªì
        const chartLabels = ['23:25:42', '23:25:47', '23:25:52', '23:25:57', '23:26:02'];
        
        const chartData = {
            temperature: {
                label: 'Nhi·ªát ƒë·ªô (¬∞C)',
                data: [26, 27, 28.5, 28, 26],
                borderColor: '#48bb78', // Green
                baseColor: 'rgba(72, 187, 120, 0.6)'
            },
            humidity: {
                label: 'ƒê·ªô ·∫©m (%)',
                data: [71.5, 72, 70, 71, 71.5],
                borderColor: '#3b82f6', // Blue
                baseColor: 'rgba(59, 130, 246, 0.6)'
            },
            co2: {
                label: 'N·ªìng ƒë·ªô CO‚ÇÇ (%)',
                data: [90, 92, 95, 93, 91],
                borderColor: '#ef4444', // Red
                baseColor: 'rgba(239, 68, 68, 0.6)'
            },
            // === M·ªöI: Th√™m d·ªØ li·ªáu B·ª•i m·ªãn ===
            dust: {
                label: 'N·ªìng ƒë·ªô b·ª•i m·ªãn (g/m¬≥)',
                data: [45, 47, 50, 48, 46],
                borderColor: '#a855f7', // Purple
                baseColor: 'rgba(168, 85, 247, 0.6)'
            },
            // === M·ªöI: Th√™m d·ªØ li·ªáu T·ªëc ƒë·ªô gi√≥ ===
            wind: {
                label: 'T·ªëc ƒë·ªô gi√≥ (m/s)',
                data: [3.2, 2.8, 3.5, 3.0, 3.1],
                borderColor: '#eab308', // Yellow
                baseColor: 'rgba(234, 179, 8, 0.6)'
            }
        };

        // H√†m tr·ª£ gi√∫p ƒë·ªÉ t·∫°o m√†u gradient
        function createChartGradient(baseColor) {
            const gradient = ctx.createLinearGradient(0, 0, 0, 200);
            gradient.addColorStop(0, baseColor);
            gradient.addColorStop(1, baseColor.replace('0.6', '0.1'));
            return gradient;
        }

        /**
         * H√†m c·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì ch√≠nh
         * @param {object} data - ƒê·ªëi t∆∞·ª£ng d·ªØ li·ªáu (v√≠ d·ª•: chartData.temperature)
         * @param {HTMLElement} clickedCard - Th·∫ª stat-card v·ª´a ƒë∆∞·ª£c click
         */
        function updateChart(data, clickedCard) {
            const newGradient = createChartGradient(data.baseColor);
            
            mainChart.data.datasets[0].label = data.label;
            mainChart.data.datasets[0].data = data.data;
            mainChart.data.datasets[0].borderColor = data.borderColor;
            mainChart.data.datasets[0].backgroundColor = newGradient;
            mainChart.update();

            // C·∫≠p nh·∫≠t tr·∫°ng th√°i 'active' c·ªßa c√°c th·∫ª
            document.querySelectorAll('.stat-card').forEach(card => {
                card.classList.remove('chart-active');
            });
            clickedCard.classList.add('chart-active');
        }

        // --- PH·∫¶N 2: CHUY·ªÇN TRANG V√Ä KH·ªûI T·∫†O ---
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- Kh·ªüi t·∫°o bi·ªÉu ƒë·ªì (Ch·∫°y ƒë·∫ßu ti√™n) ---
            ctx = document.getElementById('temperatureChart').getContext('2d');
            const initialData = chartData.temperature;
            const initialGradient = createChartGradient(initialData.baseColor);
            
            mainChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: chartLabels,
                    datasets: [{
                        label: initialData.label,
                        data: initialData.data,
                        borderColor: initialData.borderColor,
                        backgroundColor: initialGradient,
                        borderWidth: 3,
                        pointRadius: 5,
                        pointBackgroundColor: '#fff',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    scales: { 
                        y: { beginAtZero: false, grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: '#e2e8f0' } }, 
                        x: { grid: { display: false }, ticks: { color: '#e2e8f0' } } 
                    }, 
                    plugins: { 
                        legend: { labels: { color: '#e2e8f0' } }
                    } 
                }
            });

            // --- Th√™m s·ª± ki·ªán click cho c√°c th·∫ª (stat-card) ---
            const cardTemp = document.querySelector('.stat-card.green');
            const cardHumidity = document.querySelector('.stat-card.blue');
            const cardCO2 = document.querySelector('.stat-card.red');
            // === M·ªöI: Th√™m b·ªô ch·ªçn th·∫ª B·ª•i m·ªãn v√† Gi√≥ ===
            const cardDust = document.querySelector('.stat-card.purple');
            const cardWind = document.querySelector('.stat-card.yellow');

            cardTemp.addEventListener('click', function() {
                updateChart(chartData.temperature, this);
            });
            cardHumidity.addEventListener('click', function() {
                updateChart(chartData.humidity, this);
            });
            cardCO2.addEventListener('click', function() {
                updateChart(chartData.co2, this);
            });
            // === M·ªöI: Th√™m s·ª± ki·ªán click cho B·ª•i m·ªãn v√† Gi√≥ ===
            cardDust.addEventListener('click', function() {
                updateChart(chartData.dust, this);
            });
            cardWind.addEventListener('click', function() {
                updateChart(chartData.wind, this);
            });
            
            // --- X·ª≠ l√Ω chuy·ªÉn trang (Gi·ªØ nguy√™n) ---
            const navGiamSat = document.getElementById('nav-giam-sat');
            const navBaoCao = document.getElementById('nav-bao-cao');
            const navCanhBao = document.querySelector('li i.bxs-bell').parentElement;

            const contentGiamSat = document.getElementById('giam-sat-content');
            const contentBaoCao = document.getElementById('bao-cao-content');
            const contentCanhBao = document.getElementById('canh-bao-content');

            function setActiveNav(activeNav) {
                navGiamSat.classList.remove('active');
                navBaoCao.classList.remove('active');
                navCanhBao.classList.remove('active');
                activeNav.classList.add('active');
            }

            navGiamSat.addEventListener('click', function() {
                contentGiamSat.classList.remove('page-hidden');
                contentBaoCao.classList.add('page-hidden');
                contentCanhBao.classList.add('page-hidden');
                setActiveNav(navGiamSat);
            });

            navBaoCao.addEventListener('click', function() {
                contentBaoCao.classList.remove('page-hidden');
                contentGiamSat.classList.add('page-hidden');
                contentCanhBao.classList.add('page-hidden');
                setActiveNav(navBaoCao);
            });

            navCanhBao.addEventListener('click', function() {
                contentCanhBao.classList.remove('page-hidden');
                contentGiamSat.classList.add('page-hidden');
                contentBaoCao.classList.add('page-hidden');
                setActiveNav(navCanhBao);
            });
        });

    </script>

<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>

</body></html>